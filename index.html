<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Mini YouTube Recommender</title>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    .video { border: 1px solid #ccc; padding: 10px; margin: 8px 0; }
    .tags { font-size: 12px; color: gray; }
    button { margin-top: 4px; }
  </style>
</head>
<body>
  <h1>ğŸ¥ ì¶”ì²œ ì˜ìƒ ë°ëª¨</h1>
  <p>ì•„ë˜ ì˜ìƒì„ 'ì¢‹ì•„ìš”' í•˜ë©´, ë¹„ìŠ·í•œ íƒœê·¸ì˜ ì˜ìƒì´ ì¶”ì²œë©ë‹ˆë‹¤.</p>

  <h3>ì „ì²´ ì˜ìƒ</h3>
  <div id="allVideos"></div>

  <h3>ì¶”ì²œ ì˜ìƒ</h3>
  <div id="recommendations"></div>

  <script>
    // 1ï¸âƒ£ ë¯¸ë¦¬ ì¤€ë¹„ëœ "ì˜ìƒ ë°ì´í„°"
    const videos = [
      { id: 1, title: "ë¡œíŒŒì´ ìŒì•… ê³µë¶€ìš© ğŸ§", tags: ["music", "study", "relax"] },
      { id: 2, title: "p5.jsë¡œ ì½”ë”© ì•„íŠ¸ ë§Œë“¤ê¸°", tags: ["coding", "art", "javascript"] },
      { id: 3, title: "ë¦¬ì•¡íŠ¸ ì…ë¬¸", tags: ["coding", "frontend", "react"] },
      { id: 4, title: "ê·¸ë¦¼ ê·¸ë¦¬ëŠ” ë¸Œì´ë¡œê·¸", tags: ["art", "vlog"] },
      { id: 5, title: "ASMR íƒ€ì ì†Œë¦¬", tags: ["sound", "relax"] },
      { id: 6, title: "HTML ê¸°ì´ˆ 10ë¶„ ì™„ì„±", tags: ["coding", "frontend"] },
      { id: 7, title: "ìŒì•… ì¶”ì²œ: ê°ì„± í”Œë ˆì´ë¦¬ìŠ¤íŠ¸", tags: ["music", "playlist"] },
      { id: 8, title: "ë””ìì¸ ì‹œìŠ¤í…œ ì†Œê°œ", tags: ["design", "frontend"] },
      { id: 9, title: "ìš”ê°€ë¡œ ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œ", tags: ["health", "relax"] },
      { id: 10, title: "AI ê·¸ë¦¼ ê·¸ë¦¬ê¸°", tags: ["ai", "art"] },
    ];

    // 2ï¸âƒ£ ì‚¬ìš©ì ì·¨í–¥ ë¡œë“œ/ì €ì¥
    const prefsKey = "userTags";
    let userTags = JSON.parse(localStorage.getItem(prefsKey) || "[]");

    function saveTags() {
      localStorage.setItem(prefsKey, JSON.stringify(userTags));
    }

    // 3ï¸âƒ£ ì˜ìƒ ë¦¬ìŠ¤íŠ¸ í‘œì‹œ
    const allVideosDiv = document.getElementById("allVideos");
    videos.forEach(v => {
      const div = document.createElement("div");
      div.className = "video";
      div.innerHTML = `
        <b>${v.title}</b><br>
        <span class="tags">#${v.tags.join(" #")}</span><br>
        <button>ì¢‹ì•„ìš” â¤ï¸</button>
      `;
      div.querySelector("button").onclick = () => {
        userTags.push(...v.tags);
        saveTags();
        alert("ì¢‹ì•„ìš” ì €ì¥ë¨! ì¶”ì²œëª©ë¡ì´ ê°±ì‹ ë©ë‹ˆë‹¤.");
        showRecommendations();
      };
      allVideosDiv.appendChild(div);
    });

    // 4ï¸âƒ£ ì¶”ì²œ ëª©ë¡ ê³„ì‚°
    function showRecommendations() {
      const recDiv = document.getElementById("recommendations");
      recDiv.innerHTML = "";
      if (userTags.length === 0) {
        recDiv.innerHTML = "<i>ì¢‹ì•„ìš”í•œ ì˜ìƒì´ ì—†ìŠµë‹ˆë‹¤.</i>";
        return;
      }

      // ê° ì˜ìƒë³„ íƒœê·¸ ì¼ì¹˜ ì ìˆ˜ ê³„ì‚°
      const scores = videos.map(v => {
        const overlap = v.tags.filter(t => userTags.includes(t)).length;
        return { ...v, score: overlap };
      });

      // ì ìˆ˜ìˆœ ì •ë ¬ í›„ ìƒìœ„ 3ê°œ ì¶”ì²œ
      const top = scores.sort((a,b) => b.score - a.score).slice(0,3);

      top.forEach(v => {
        const div = document.createElement("div");
        div.className = "video";
        div.innerHTML = `<b>${v.title}</b><br>
                         <span class="tags">#${v.tags.join(" #")}</span>`;
        recDiv.appendChild(div);
      });
    }

    showRecommendations();
  </script>
</body>
</html>
